syntax = "proto3";
package dogma.interop.v1.discover;

option go_package = "github.com/dogmatiq/interopspec/discoverspec";

// DiscoverAPI is a service for discovering the applications hosted on a server.
service DiscoverAPI {
  // Watch starts watching the server for updates to the availability of Dogma
  // applications.
  rpc Watch(WatchRequest) returns (stream WatchResponse);
}

message WatchRequest {}

message WatchResponse {
  // Application is the identity of the Dogma application that the
  Identity application = 1;

  // Available indicates whether the application should currently be considered
  // available or not.
  bool available = 2;
}

// Identity represents the identity of an application.
message Identity {
  // Name is the application's unique name.
  string name = 1;

  // Key is the application's immutable, unique key.
  string key = 2;
}
